/**

add-blog.js - Handles posting new blog articles to Firebase Firestore */


import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"; import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = { apiKey: "AIzaSyAx0q_QGU35tLFP4MtUMQQUtw-WVNagpHk", authDomain: "izuchukwu-foods.firebaseapp.com", projectId: "izuchukwu-foods", storageBucket: "izuchukwu-foods.firebasestorage.app", messagingSenderId: "811147638426", appId: "1:811147638426:web:f2403b6cf7e0b6f19b1123" };

const app = initializeApp(firebaseConfig); const db = getFirestore(app);

const postForm = document.getElementById("postForm");

postForm.addEventListener("submit", async (e) => { e.preventDefault(); const title = document.getElementById("title").value.trim(); const content = document.getElementById("content").value.trim(); const author = localStorage.getItem("username") || "Anonymous"; const userId = localStorage.getItem("userId") || Date.now().toString();

if (!title || !content) return alert("Please fill in all fields");

try { await addDoc(collection(db, "posts"), { title, content, author, userId, createdAt: serverTimestamp() });

alert("Post added successfully!");
postForm.reset();
// Stay on page since this is admin dashboard

} catch (err) { console.error("Error adding post:", err); alert("Failed to add post. Try again."); } });

